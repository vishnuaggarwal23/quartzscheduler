<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    <property name="collate_info" value="ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin"/>

    <changeSet id="spring-data-jpa-1" author="spring-data-jpa">
        <createTable tableName="hibernate_sequence">
            <column name="next_val" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <insert tableName="hibernate_sequence">
            <column name="next_val" value="1"/>
        </insert>
    </changeSet>

    <changeSet id="spring-data-jpa-2" author="spring-data-jpa">
        <createTable tableName="user">
            <column name="id" type="bigint(20)">
                <constraints nullable="false" primaryKeyName="pk_user_id" primaryKey="true"/>
            </column>
            <column name="date_created" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
            <column name="date_updated" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
            <column name="deleted" type="bit(1)" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="bigint(20)" defaultValueNumeric="0">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
            <column name="updated_by_id" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
            <column name="account_enabled" type="bit(1)" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="account_expired" type="bit(1)" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="account_locked" type="bit(1)" defaultValueBoolean="true">
                <constraints nullable="false"/>
            </column>
            <column name="credentials_expired" type="bit(1)" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="quartz_group_id" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
            <column name="email" type="varchar(255) COLLATE utf8_bin">
                <constraints nullable="false"/>
            </column>
            <column name="first_name" type="varchar(255) COLLATE utf8_bin">
                <constraints nullable="true"/>
            </column>
            <column name="middle_name" type="varchar(255) COLLATE utf8_bin">
                <constraints nullable="true"/>
            </column>
            <column name="last_name" type="varchar(255) COLLATE utf8_bin">
                <constraints nullable="true"/>
            </column>
            <column name="password" type="varchar(255) COLLATE utf8_bin">
                <constraints nullable="false"/>
            </column>
            <column name="username" type="varchar(255) COLLATE utf8_bin">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql>
            <append value="${collate_info}"/>
        </modifySql>
    </changeSet>

    <changeSet id="spring-data-jpa-3" author="spring-data-jpa">
        <createTable tableName="authority">
            <column name="id" type="bigint(20)">
                <constraints nullable="false" primaryKeyName="pk_authority_id" primaryKey="true"/>
            </column>
            <column name="date_created" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
            <column name="date_updated" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
            <column name="deleted" type="bit(1)" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="bigint(20)" defaultValueNumeric="0">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="bigint(20)">
                <constraints nullable="true" foreignKeyName="fk_authority_created_by_id" referencedTableName="user"
                             referencedColumnNames="id"/>
            </column>
            <column name="updated_by_id" type="bigint(20)">
                <constraints nullable="true" foreignKeyName="fk_authority_updated_by_id" referencedTableName="user"
                             referencedColumnNames="id"/>
            </column>
            <column name="name" type="varchar(255) COLLATE utf8_bin">
                <constraints unique="true" nullable="false"/>
            </column>
        </createTable>
        <modifySql>
            <append value="${collate_info}"/>
        </modifySql>
    </changeSet>

    <changeSet id="spring-data-jpa-4" author="spring-data-jpa">
        <createTable tableName="quartz_group">
            <column name="id" type="bigint(20)">
                <constraints nullable="false" primaryKeyName="pk_quartz_group_id" primaryKey="true"/>
            </column>
            <column name="date_created" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
            <column name="date_updated" type="bigint(20)">
                <constraints nullable="true"/>
            </column>
            <column name="deleted" type="bit(1)" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="bigint(20)" defaultValueNumeric="0">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="bigint(20)">
                <constraints nullable="true" foreignKeyName="fk_quartz_group_created_by_id" referencedTableName="user"
                             referencedColumnNames="id"/>
            </column>
            <column name="updated_by_id" type="bigint(20)">
                <constraints nullable="true" foreignKeyName="fk_quartz_group_updated_by_id" referencedTableName="user"
                             referencedColumnNames="id"/>
            </column>
            <column name="name" type="varchar(255) COLLATE utf8_bin">
                <constraints unique="true" nullable="false"/>
            </column>
        </createTable>
        <modifySql>
            <append value="${collate_info}"/>
        </modifySql>
    </changeSet>

    <changeSet id="spring-data-jpa-5" author="spring-data-jpa">
        <createTable tableName="user_authorities">
            <column name="users_id" type="bigint(20)">
                <constraints nullable="false" primaryKeyName="pk_user_authorities_users_authorities_id"
                             foreignKeyName="fk_user_authorities_users_id" referencedTableName="user"
                             referencedColumnNames="id" primaryKey="true"/>
            </column>
            <column name="authorities_id" type="bigint(20)">
                <constraints nullable="false" primaryKeyName="pk_user_authorities_users_authorities_id"
                             foreignKeyName="fk_user_authorities_authorities_id" referencedTableName="authority"
                             referencedColumnNames="id" primaryKey="true"/>
            </column>
        </createTable>
        <modifySql>
            <append value="${collate_info}"/>
        </modifySql>
    </changeSet>

    <changeSet id="spring-data-jpa-6" author="spring-data-jpa">
        <addForeignKeyConstraint baseTableName="user" baseColumnNames="created_by_id"
                                 constraintName="fk_user_created_by_id"
                                 referencedTableName="user"
                                 referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="user" baseColumnNames="updated_by_id"
                                 constraintName="fk_user_updated_by_id"
                                 referencedTableName="user"
                                 referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="user" baseColumnNames="quartz_group_id"
                                 constraintName="fk_user_quartz_group_id"
                                 referencedTableName="quartz_group"
                                 referencedColumnNames="id"/>
    </changeSet>
</databaseChangeLog>